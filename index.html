<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Startpage</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/styles.css">
<!-- Small inline favicon to avoid 404 when serving locally -->
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23282728'/%3E%3Ctext x='50' y='60' font-size='56' text-anchor='middle' fill='%23ebdbb2' font-family='Arial,Helvetica,sans-serif'%3E‚Ä¢%3C/text%3E%3C/svg%3E">
</head>
<body>
<div class="translucent-container">
  <div class="container">
    <center><h1 class="typing">dotStart</h1></center>
    <div class="page-rest">
    <form id="searchForm" class="search-box" action="#" method="GET" role="search" aria-label="Search">
      <label for="searchInput" class="sr-only">Search</label>
      <div class="search-input-wrapper">
        <img id="searchEngineFavicon" class="search-favicon" src="" alt="" aria-hidden="true">
        <input id="searchInput" type="text" name="q" placeholder="Search..." autocomplete="off" aria-label="Search query" />
      </div>
      <button type="submit" aria-label="Submit search">Go</button>
    </form>
    <div class="top-info">
      <div id="clock" class="clock" aria-live="polite"></div>
      <div id="greeting" class="greeting" aria-live="polite"></div>
      <div id="weather" class="weather" aria-live="polite">Loading weather...</div>
    </div>
    <div class="bookmarks-grid"></div>
    <div id="widgetsContainer" class="widgets-container">
      <!-- Todo Widget -->
      <div id="todoWidget" class="widget" data-widget="todo">
        <div class="widget-header">
          <h3>üìù Todo</h3>
          <button class="widget-drag-handle" aria-label="Drag to reposition widget" title="Drag to move">‚ãÆ‚ãÆ</button>
        </div>
        <div class="widget-body">
          <div class="todo-input-row">
            <input id="todoInput" type="text" placeholder="Add a task..." aria-label="New todo item">
            <button id="todoAdd" type="button" aria-label="Add todo">+</button>
          </div>
          <ul id="todoList" class="todo-list" aria-label="Todo list"></ul>
        </div>
      </div>

      <!-- News Feed Widget -->
      <div id="newsWidget" class="widget" data-widget="news">
        <div class="widget-header">
          <h3>üì∞ News</h3>
          <button class="widget-drag-handle" aria-label="Drag to reposition widget" title="Drag to move">‚ãÆ‚ãÆ</button>
        </div>
        <div class="widget-body">
          <div id="newsFeed" class="news-feed" aria-label="News feed"></div>
          <button id="newsRefresh" type="button" aria-label="Refresh news feed">Refresh</button>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>
 
<div class="bottom-bar">
  <div class="bottom-left">
    <button id="configButton" aria-haspopup="dialog" aria-controls="configModal" aria-expanded="false" aria-label="Open configuration">Config ‚öôÔ∏è</button>
    <button id="widgetLockToggle" aria-label="Toggle widget lock" title="Lock/unlock widget positions">üîì</button>
  </div>
  <div class="bottom-center"><span>¬© 2025 <a href="https://github.com/scufflord/Startpage" target="_blank" rel="noopener noreferrer">Scufflord</a></span></div>
  <div class="bottom-right">
    <select id="themeSelector" aria-label="Theme selector">
      <option value="gruvbox">Gruvbox</option>
      <option value="darkOcean">Dark Ocean</option>
      <option value="solarized">Solarized</option>
      <option value="catppuccinMocha">Catppuccin Mocha</option>
      <option value="catppuccinLatte">Catppuccin Latte</option>
      <option value="catppuccinFrappe">Catppuccin Frappe</option>
    </select>
  </div>
</div>

<div id="configModal" aria-hidden="true" role="dialog" aria-label="Configuration modal">
  <!-- floating close button (replaces the full header) -->
  <button id="modalCloseFloat" class="modal-close-floating" aria-label="Close configuration">√ó</button>
  <div class="modal-body">
    <h2 class="modal-title">Edit Bookmarks</h2>
    <div class="modal-grid">
    <div class="section">
      <h3>Live Preview</h3>
      <div id="previewGrid"></div>
    </div>
    <div class="section">
      <h3>Edit Bookmarks</h3>
      <div id="bookmarkEditor"></div>
      <div class="actions-row" style="margin-top:0.5rem;">
        <button id="addBookmark" aria-label="Add bookmark">Add Bookmark</button>
      </div>
    </div>
  </div>
  <div class="actions-row" style="margin-top:1rem;">
    <button id="saveBookmarks" aria-label="Save bookmarks">Save Changes</button>
  </div>
  <h3>Background Image</h3>
  <label for="backgroundInput" class="sr-only">Background image URL</label>
  <input type="text" id="backgroundInput" placeholder="Paste image URL...">
  <br>
  <br>
  <button id="saveBackground" aria-label="Save background">Save Background</button>
  <br>
  <br>
  <h3>Background Gallery</h3>
  <div id="bgGallery" aria-live="polite" style="margin-bottom:0.5rem;"></div>
  <div class="bg-upload-row">
    <label for="bgUpload" class="sr-only">Upload background image</label>
    <input type="file" id="bgUpload" accept="image/*">
    <button id="clearBackground" aria-label="Clear background">Clear Background</button>
  </div>
  <div style="margin-top:0.5rem;">
    <label for="autoThemeToggle" class="toggle-label">
      <div class="toggle-switch">
        <input type="checkbox" id="autoThemeToggle">
        <span class="toggle-slider"></span>
      </div>
      <span>Auto theme from background</span>
    </label>
  </div>
  <br>
  <h3>Weather Settings</h3>
  <div class="section">
    <label for="weatherLat">Latitude
      <input id="weatherLat" type="text" placeholder="e.g. 35.1401" aria-label="Weather latitude">
    </label>
    <label for="weatherLon">Longitude
      <input id="weatherLon" type="text" placeholder="e.g. -93.9216" aria-label="Weather longitude">
    </label>
    <div class="actions-row" style="margin-top:0.5rem;">
      <button id="useGeoBtn" type="button" aria-label="Use browser location">Use my location</button>
      <button id="saveWeatherBtn" type="button" aria-label="Save weather location">Save Location</button>
    </div>
  </div>
  <h3>Custom Theme Editor</h3>
  <div id="themeEditor">
    <label for="var-bg">--bg<input id="var-bg" type="color" data-var="--bg"></label>
    <label for="var-fg">--fg<input id="var-fg" type="color" data-var="--fg"></label>
    <label for="var-accent">--accent<input id="var-accent" type="color" data-var="--accent"></label>
    <label for="var-secondary">--secondary<input id="var-secondary" type="color" data-var="--secondary"></label>
    <label for="var-bookmark-bg">--bookmark-bg<input id="var-bookmark-bg" type="color" data-var="--bookmark-bg"></label>
    <label for="var-bookmark-hover-bg">--bookmark-hover-bg<input id="var-bookmark-hover-bg" type="color" data-var="--bookmark-hover-bg"></label>
  </div>
  <h3>Search Engine</h3>
  <div class="section">
    <label for="searchEngineSelect">Choose engine
      <select id="searchEngineSelect" aria-label="Search engine selector">
        <option value="google">Google</option>
        <option value="ddg">DuckDuckGo</option>
        <option value="bing">Bing</option>
        <option value="startpage">Startpage</option>
        <option value="brave">Brave</option>
        <option value="custom">Custom (edit below)</option>
      </select>
    </label>
    <label for="searchEngineTemplate">Search template
      <input id="searchEngineTemplate" type="text" placeholder="https://www.google.com/search?q={q}" aria-label="Search template URL" />
    </label>
    <div style="margin-top:0.5rem;font-size:0.9rem;color:var(--secondary);">Use <code>{q}</code> where the query should be inserted. Example: <code>https://duckduckgo.com/?q={q}</code></div>
  </div>
  <h3>Greeting Texts</h3>
  <div class="section">
    <label for="greetingMorning">Morning greeting
      <input id="greetingMorning" type="text" placeholder="Good morning" aria-label="Morning greeting">
    </label>
    <label for="greetingAfternoon">Afternoon greeting
      <input id="greetingAfternoon" type="text" placeholder="Good afternoon" aria-label="Afternoon greeting">
    </label>
    <label for="greetingEvening">Evening greeting
      <input id="greetingEvening" type="text" placeholder="Good evening" aria-label="Evening greeting">
    </label>
    <div class="actions-row" style="margin-top:0.5rem;">
      <button id="resetGreetings" type="button" aria-label="Reset greetings">Reset to defaults</button>
    </div>
  </div>
  <h3>Import / Export</h3>
  <div class="section">
    <div style="display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center;">
      <button id="exportSettings" type="button" aria-label="Export settings">Export Settings</button>
    </div>
    <div style="margin-top:0.5rem;">
      <label for="importFile">Import from JSON file</label>
      <input id="importFile" type="file" accept=".json" aria-label="Import settings file">
    </div>
    <div style="margin-top:0.5rem;font-size:0.9rem;color:var(--secondary);">Export includes bookmarks, theme, background selection, greetings, and weather location.</div>
  </div>
  <h3>Widgets</h3>
  <div class="section">
    <div style="display:flex;gap:1rem;flex-direction:column;">
      <label for="todoWidgetToggle" class="toggle-label">
        <div class="toggle-switch">
          <input type="checkbox" id="todoWidgetToggle" aria-label="Toggle todo widget">
          <span class="toggle-slider"></span>
        </div>
        <span>Show Todo Widget</span>
      </label>
      <label for="newsWidgetToggle" class="toggle-label">
        <div class="toggle-switch">
          <input type="checkbox" id="newsWidgetToggle" aria-label="Toggle news widget">
          <span class="toggle-slider"></span>
        </div>
        <span>Show News Widget</span>
      </label>
    </div>
  </div>
  </div>
</div>

<script type="module" src="js/script.js" defer></script>

<!-- Toast for non-blocking actions (undo) -->
<div id="toast" class="toast" aria-live="polite" aria-atomic="true">
  <span id="toastMsg"></span>
  <button id="toastUndo" class="toast-undo" aria-label="Undo">Undo</button>
</div>

</body>
</html>
